(()=>{"use strict";const e=require("path"),t=require("express"),s=t(),r=__dirname,o=e.join(r,"index.html");s.use(((e,t,s)=>{if("https"!==e.headers["x-forwarded-proto"]){if(3===(r=e.headers.host.split(".")).length&&"www"===r[0])return t.redirect("https://"+e.headers.host+e.url);if(2===r.length)return t.redirect("https://www."+e.headers.host+e.url);s()}else{var r=e.headers.host.split(".");if(console.log(r),2===r.length)return t.redirect("https://www."+e.headers.host+e.url);s()}})),s.use(t.static(r)),s.get("*",((e,t)=>{t.sendFile(o)}));const i=process.env.PORT||8080;s.listen(i,(()=>{console.log(`App listening to ${i}....`),console.log("Press Ctrl+C to quit.")}))})();